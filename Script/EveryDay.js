(()=>{"use strict";var e={208:(e,t,b)=>{function s(e,t){class s{constructor(e){this.env=e}send(e,t="GET"){e="string"==typeof e?{url:e}:e;let b=this.get;return"POST"===t&&(b=this.post),new Promise(((t,s)=>{b.call(this,e,((e,b,a)=>{e?s(e):t(b)}))}))}get(e){return this.send.call(this.env,e)}post(e){return this.send.call(this.env,e,"POST")}}return new class{constructor(e,t){this.name=e,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,t),this.log("",`🔔${this.name}, 开始!`)}getEnv(){switch(!0){case"undefined"!=typeof $loon:return"Loon";case"undefined"!=typeof $rocket:return"Shadowrocket";case"undefined"!=typeof $environment&&$environment["surge-version"]:return"Surge";case"undefined"!=typeof $environment&&$environment["stash-version"]:return"Stash";case"undefined"!=typeof $task:return"Quantumult X"}return"Node.js"}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(e,t=null){try{return JSON.parse(e)}catch{return t}}toStr(e,t=null){try{return JSON.stringify(e)}catch{return t}}getjson(e,t){let b=t;if(this.getdata(e))try{b=JSON.parse(this.getdata(e))}catch{}return b}setjson(e,t){try{return this.setdata(JSON.stringify(e),t)}catch{return!1}}getScript(e){return new Promise((t=>{this.get({url:e},((e,b,s)=>t(s)))}))}runScript(e,t){return new Promise((b=>{let s=this.getdata("@chavy_boxjs_userCfgs.httpapi");s=s?s.replace(/\n/g,"").trim():s;let a=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");a=a?1*a:20,a=t&&t.timeout?t.timeout:a;const[c,r]=s.split("@"),f={url:`http://${r}/v1/scripting/evaluate`,body:{script_text:e,mock_type:"cron",timeout:a},headers:{"X-Key":c,Accept:"*/*"},timeout:a};this.post(f,((e,t,s)=>b(s)))})).catch((e=>this.logErr(e)))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:b(147),this.path=this.path?this.path:b(17);const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),a=!s&&this.fs.existsSync(t);if(!s&&!a)return{};{const b=s?e:t;try{return JSON.parse(this.fs.readFileSync(b))}catch(e){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:b(147),this.path=this.path?this.path:b(17);const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),a=!s&&this.fs.existsSync(t),c=JSON.stringify(this.data);s?this.fs.writeFileSync(e,c):a?this.fs.writeFileSync(t,c):this.fs.writeFileSync(e,c)}}lodash_get(e,t,b=void 0){const s=t.replace(/\[(\d+)\]/g,".$1").split(".");let a=e;for(const e of s)if(a=Object(a)[e],void 0===a)return b;return a}lodash_set(e,t,b){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),t.slice(0,-1).reduce(((e,b,s)=>Object(e[b])===e[b]?e[b]:e[b]=Math.abs(t[s+1])>>0==+t[s+1]?[]:{}),e)[t[t.length-1]]=b),e}getdata(e){let t=this.getval(e);if(/^@/.test(e)){const[,b,s]=/^@(.*?)\.(.*?)$/.exec(e),a=b?this.getval(b):"";if(a)try{const e=JSON.parse(a);t=e?this.lodash_get(e,s,""):t}catch(e){t=""}}return t}setdata(e,t){let b=!1;if(/^@/.test(t)){const[,s,a]=/^@(.*?)\.(.*?)$/.exec(t),c=this.getval(s),r=s?"null"===c?null:c||"{}":"{}";try{const t=JSON.parse(r);this.lodash_set(t,a,e),b=this.setval(JSON.stringify(t),s)}catch(t){const c={};this.lodash_set(c,a,e),b=this.setval(JSON.stringify(c),s)}}else b=this.setval(e,t);return b}getval(e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(e);case"Quantumult X":return $prefs.valueForKey(e);case"Node.js":return this.data=this.loaddata(),this.data[e];default:return this.data&&this.data[e]||null}}setval(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(e,t);case"Quantumult X":return $prefs.setValueForKey(e,t);case"Node.js":return this.data=this.loaddata(),this.data[t]=e,this.writedata(),!0;default:return this.data&&this.data[t]||null}}initGotEnv(e){this.got=this.got?this.got:b(452),this.cktough=this.cktough?this.cktough:b(976),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},void 0===e.headers.Cookie&&void 0===e.cookieJar&&(e.cookieJar=this.ckjar))}get(e,t=(()=>{})){switch(e.headers&&(delete e.headers["Content-Type"],delete e.headers["Content-Length"],delete e.headers["content-type"],delete e.headers["content-length"]),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(e,((e,b,s)=>{!e&&b&&(b.body=s,b.statusCode=b.status?b.status:b.statusCode,b.status=b.statusCode),t(e,b,s)}));break;case"Quantumult X":this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:b,statusCode:s,headers:a,body:c,bodyBytes:r}=e;t(null,{status:b,statusCode:s,headers:a,body:c,bodyBytes:r},c,r)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let s=b(135);this.initGotEnv(e),this.got(e).on("redirect",((e,t)=>{try{if(e.headers["set-cookie"]){const b=e.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();b&&this.ckjar.setCookieSync(b,null),t.cookieJar=this.ckjar}}catch(e){this.logErr(e)}})).then((e=>{const{statusCode:b,statusCode:a,headers:c,rawBody:r}=e,f=s.decode(r,this.encoding);t(null,{status:b,statusCode:a,headers:c,rawBody:r,body:f},f)}),(e=>{const{message:b,response:a}=e;t(b,a,a&&s.decode(a.rawBody,this.encoding))}))}}post(e,t=(()=>{})){const s=e.method?e.method.toLocaleLowerCase():"post";switch(e.body&&e.headers&&!e.headers["Content-Type"]&&!e.headers["content-type"]&&(e.headers["content-type"]="application/x-www-form-urlencoded"),e.headers&&(delete e.headers["Content-Length"],delete e.headers["content-length"]),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](e,((e,b,s)=>{!e&&b&&(b.body=s,b.statusCode=b.status?b.status:b.statusCode,b.status=b.statusCode),t(e,b,s)}));break;case"Quantumult X":e.method=s,this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:b,statusCode:s,headers:a,body:c,bodyBytes:r}=e;t(null,{status:b,statusCode:s,headers:a,body:c,bodyBytes:r},c,r)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let a=b(135);this.initGotEnv(e);const{url:c,...r}=e;this.got[s](c,r).then((e=>{const{statusCode:b,statusCode:s,headers:c,rawBody:r}=e,f=a.decode(r,this.encoding);t(null,{status:b,statusCode:s,headers:c,rawBody:r,body:f},f)}),(e=>{const{message:b,response:s}=e;t(b,s,s&&a.decode(s.rawBody,this.encoding))}))}}time(e,t=null){const b=t?new Date(t):new Date;let s={"M+":b.getMonth()+1,"d+":b.getDate(),"H+":b.getHours(),"m+":b.getMinutes(),"s+":b.getSeconds(),"q+":Math.floor((b.getMonth()+3)/3),S:b.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(b.getFullYear()+"").substr(4-RegExp.$1.length)));for(let t in s)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?s[t]:("00"+s[t]).substr((""+s[t]).length)));return e}queryStr(e){let t="";for(const b in e){let s=e[b];null!=s&&""!==s&&("object"==typeof s&&(s=JSON.stringify(s)),t+=`${b}=${s}&`)}return t=t.substring(0,t.length-1),t}msg(t=e,b="",s="",a={}){const c=e=>{switch(typeof e){case void 0:return e;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:e};case"Loon":case"Shadowrocket":return e;case"Quantumult X":return{"open-url":e};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:return{url:e.url||e.openUrl||e["open-url"]};case"Loon":return{openUrl:e.openUrl||e.url||e["open-url"],mediaUrl:e.mediaUrl||e["media-url"]};case"Quantumult X":return{"open-url":e["open-url"]||e.url||e.openUrl,"media-url":e["media-url"]||e.mediaUrl,"update-pasteboard":e["update-pasteboard"]||e.updatePasteboard};case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(t,b,s,c(a));break;case"Quantumult X":$notify(t,b,s,c(a));case"Node.js":}if(!this.isMuteLog){let e=["","==============📣系统通知📣=============="];e.push(t),b&&e.push(b),s&&e.push(s),console.log(e.join("\n")),this.logs=this.logs.concat(e)}}log(...e){e.length>0&&(this.logs=[...this.logs,...e]),console.log(e.join(this.logSeparator))}logErr(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`❗️${this.name}, 错误!`,e);break;case"Node.js":this.log("",`❗️${this.name}, 错误!`,e.stack)}}wait(e){return new Promise((t=>setTimeout(t,e)))}done(e={}){const t=((new Date).getTime()-this.startTime)/1e3;switch(this.log("",`🔔${this.name}, 结束! 🕛 ${t} 秒`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(e);break;case"Node.js":process.exit(1)}}}(e,t)}b.d(t,{Z:()=>s})},452:e=>{e.exports=require("got")},135:e=>{e.exports=require("iconv-lite")},976:e=>{e.exports=require("tough-cookie")},147:e=>{e.exports=require("fs")},17:e=>{e.exports=require("path")}},t={};function b(s){var a=t[s];if(void 0!==a)return a.exports;var c=t[s]={exports:{}};return e[s](c,c.exports,b),c.exports}b.d=(e,t)=>{for(var s in t)b.o(t,s)&&!b.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},b.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=b(208);
/******************************************
 * @license 
 * @name 老黄历
 * @statement 仅供学习交流|禁止用于商业用途
******************************************
Quantumult X:
[task_local]
06 9 * * * https://iam2r.github.io/ProxyConfig/Script/EveryDay.js, tag=老黄历, enabled=true
******************************************
Loon、Surge:
[Script]
cron "6 9 * * *" script-path=https://iam2r.github.io/ProxyConfig/Script/EveryDay.js, timeout=10, tag=老黄历
******************************************/const t="老黄历",s=(0,e.Z)("老黄历");let a={};a={lunarInfo:[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,41696,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,41680,53584,62034,54560],solarMonth:[31,28,31,30,31,30,31,31,30,31,30,31],Gan:["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],Zhi:["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],Animals:["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],solarTerm:["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],sTermInfo:["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],nStr1:["日","一","二","三","四","五","六","七","八","九","十"],nStr2:["初","十","廿","卅"],nStr3:["正","二","三","四","五","六","七","八","九","十","冬","腊"],lYearDays:function(e){var t,b=348;for(t=32768;t>8;t>>=1)b+=a.lunarInfo[e-1900]&t?1:0;return b+a.leapDays(e)},leapMonth:function(e){return 15&a.lunarInfo[e-1900]},leapDays:function(e){return a.leapMonth(e)?65536&a.lunarInfo[e-1900]?30:29:0},monthDays:function(e,t){return t>12||t<1?-1:a.lunarInfo[e-1900]&65536>>t?30:29},solarDays:function(e,t){if(t>12||t<1)return-1;var b=t-1;return 1==b?e%4==0&&e%100!=0||e%400==0?29:28:a.solarMonth[b]},toGanZhiYear:function(e){var t=(e-3)%10,b=(e-3)%12;return 0==t&&(t=10),0==b&&(b=12),a.Gan[t-1]+a.Zhi[b-1]},toAstro:function(e,t){return"魔羯水瓶双鱼白羊金牛双子巨蟹狮子处女天秤天蝎射手魔羯".substr(2*e-(t<[20,19,21,21,21,22,23,23,23,23,22,22][e-1]?2:0),2)+"座"},toGanZhi:function(e){return a.Gan[e%10]+a.Zhi[e%12]},getTerm:function(e,t){if(e<1900||e>2100)return-1;if(t<1||t>24)return-1;var b=a.sTermInfo[e-1900],s=[parseInt("0x"+b.substr(0,5)).toString(),parseInt("0x"+b.substr(5,5)).toString(),parseInt("0x"+b.substr(10,5)).toString(),parseInt("0x"+b.substr(15,5)).toString(),parseInt("0x"+b.substr(20,5)).toString(),parseInt("0x"+b.substr(25,5)).toString()],c=[s[0].substr(0,1),s[0].substr(1,2),s[0].substr(3,1),s[0].substr(4,2),s[1].substr(0,1),s[1].substr(1,2),s[1].substr(3,1),s[1].substr(4,2),s[2].substr(0,1),s[2].substr(1,2),s[2].substr(3,1),s[2].substr(4,2),s[3].substr(0,1),s[3].substr(1,2),s[3].substr(3,1),s[3].substr(4,2),s[4].substr(0,1),s[4].substr(1,2),s[4].substr(3,1),s[4].substr(4,2),s[5].substr(0,1),s[5].substr(1,2),s[5].substr(3,1),s[5].substr(4,2)];return parseInt(c[t-1])},toChinaMonth:function(e){return e>12||e<1?-1:a.nStr3[e-1]+"月"},toChinaDay:function(e){var t;switch(e){case 10:t="初十";break;case 20:t="二十";break;case 30:t="三十";break;default:t=a.nStr2[Math.floor(e/10)],t+=a.nStr1[e%10]}return t},getAnimal:function(e){return a.Animals[(e-4)%12]},solar2lunar:function(e,t,b){if(e<1900||e>2100)return-1;if(1900==e&&1==t&&b<31)return-1;if(e)s=new Date(e,parseInt(t)-1,b);else var s=new Date;var c,r=0,f=(e=s.getFullYear(),t=s.getMonth()+1,b=s.getDate(),(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate())-Date.UTC(1900,0,31))/864e5);for(c=1900;c<2101&&f>0;c++)f-=r=a.lYearDays(c);f<0&&(f+=r,c--);var n=new Date,o=!1;n.getFullYear()==e&&n.getMonth()+1==t&&n.getDate()==b&&(o=!0);var i=s.getDay(),d=a.nStr1[i];0==i&&(i=7);var h=c,u=a.leapMonth(c),l=!1;for(c=1;c<13&&f>0;c++)u>0&&c==u+1&&0==l?(--c,l=!0,r=a.leapDays(h)):r=a.monthDays(h,c),1==l&&c==u+1&&(l=!1),f-=r;0==f&&u>0&&c==u+1&&(l?l=!1:(l=!0,--c)),f<0&&(f+=r,--c);var g=c,p=f+1,y=t-1,m=a.toGanZhiYear(h),v=a.getTerm(h,2*t-1),S=a.getTerm(h,2*t),w=a.toGanZhi(12*(e-1900)+t+11);b>=v&&(w=a.toGanZhi(12*(e-1900)+t+12));var k=!1,_=null;v==b&&(k=!0,_=a.solarTerm[2*t-2]),S==b&&(k=!0,_=a.solarTerm[2*t-1]);var $=Date.UTC(e,y,1,0,0,0,0)/864e5+25567+10,j=a.toGanZhi($+b-1),D=a.toAstro(t,b);return{lYear:h,lMonth:g,lDay:p,Animal:a.getAnimal(h),IMonthCn:(l?"闰":"")+a.toChinaMonth(g),IDayCn:a.toChinaDay(p),cYear:e,cMonth:t,cDay:b,gzYear:m,gzMonth:w,gzDay:j,isToday:o,isLeap:l,nWeek:i,ncWeek:"星期"+d,isTerm:k,Term:_,astro:D}},lunar2solar:function(e,t,b,s){s=!!s;var c=a.leapMonth(e);if(a.leapDays(e),s&&c!=t)return-1;if(2100==e&&12==t&&b>1||1900==e&&1==t&&b<31)return-1;var r=a.monthDays(e,t),f=r;if(s&&(f=a.leapDays(e,t)),e<1900||e>2100||b>f)return-1;for(var n=0,o=1900;o<e;o++)n+=a.lYearDays(o);var i=0,d=!1;for(o=1;o<t;o++)i=a.leapMonth(e),d||i<=o&&i>0&&(n+=a.leapDays(e),d=!0),n+=a.monthDays(e,o);s&&(n+=r);var h=Date.UTC(1900,1,30,0,0,0),u=new Date(864e5*(n+b-31)+h),l=u.getUTCFullYear(),g=u.getUTCMonth()+1,p=u.getUTCDate();return a.solar2lunar(l,g,p)}};const c=s.http,r=new Date,f=r.getFullYear(),n=r.getMonth()+1,o=r.getDate(),i=r.getHours(),d=[{festival:"元宵节",date:u(f,1,15)},{festival:"清明",date:l(f)||l(f-1)?f+"/4/4":f+"/4/5"},{festival:"劳动节",date:`${f}/5/1`},{festival:"端午节",date:u(f,5,5)},{festival:"中秋节",date:u(f,8,15)},{festival:"国庆节",date:`${f}/10/1`},{festival:"元旦",date:`${f+1}/1/1`},{festival:"春节",date:u(f+1,1,1)}];let h=[];function u(e,t,b){var s=a.lunar2solar(e,t,b);return s.cYear+"/"+s.cMonth+"/"+s.cDay}function l(e){return e%4==0&&e%100!=0||e%400==0}(async()=>{await new Promise((async e=>{for(let e=0;e<d.length;e++){const t=d[e],b=p(new Date(t.date).getTime().toString().slice(0,10));b>0&&h.push({...t,diff:b})}e()})),await new Promise((async e=>{let b="";b=i<12?"早":i<19?"晌":"晚";let a=`【${n}月${o}日${b}】`;const{zh:d,en:u}=await g();a+=`\n${u}\t${d}`;const l=await new Promise((async(e,t)=>{const b=`moyu_${f}${n}`,a=s.getdata(b)||"[]";let r=JSON.parse(a);if(!r.length){const e=`https://wannianrili.bmcx.com/${f}-${n<10?"0"+n:n}-${o<10?"0"+o:o}__wannianrili/`;try{const{body:t}=await c.get(e),b=t.match(/<div class="wnrl_k_you".*>([\s\S]*?)<\/div><div class="wnrl_k_xia_id"/)[0].split('<div class="wnrl_k_xia_id"')[0].split(/<div class="wnrl_k_you" id="wnrl_k_you_id_/).filter(Boolean).map((e=>{var t,b,s;const[,a=""]=e.match(/<div class="wnrl_k_you_id_biaoti">([\s\S]*?)<\/div>/)||["",""],[,c=""]=e.match(/<div class="wnrl_k_you_id_wnrl_riqi">([\s\S]*?)<\/div>/)||["",""],[,r=""]=e.match(/<div class="wnrl_k_you_id_wnrl_nongli">([\s\S]*?)<\/div>/)||["",""],[,f=""]=e.match(/<div class="wnrl_k_you_id_wnrl_nongli_ganzhi">([\s\S]*?)<\/div>/)||["",""],[,n=""]=e.match(/<span class="wnrl_k_you_id_wnrl_jieri_neirong">([\s\S]*?)<\/span>/)||["",""],o=(null===(t=n.match(/<a.*?>(.*?)<\/a>/g))||void 0===t?void 0:t.map((e=>e.match(/<a.*?>(.*?)<\/a>/)[1])))||[],[,i=""]=e.match(/<div class="wnrl_k_you_id_wnrl_yi">([\s\S]*?)<\/div>/)||["",""],d=(null===(b=i.match(/<a.*?>(.*?)<\/a>/g))||void 0===b?void 0:b.map((e=>{const[,t,b]=e.match(/<a.*?>(.*?)<\/a>/);return{name:t,desc:b}})))||[],[,h=""]=e.match(/<div class="wnrl_k_you_id_wnrl_ji">([\s\S]*?)<\/div>/)||["",""],u=(null===(s=h.match(/<a.*?>(.*?)<\/a>/g))||void 0===s?void 0:s.map((e=>{const[,t,b]=e.match(/<a.*?>(.*?)<\/a>/);return{name:t,desc:b}})))||[];return{date:a,day:c,lunar:r,lunarGanZhi:f,festivals:o,suit:d,avoid:u}}));s.setdata(JSON.stringify(b),`moyu_${f}${n}`);const a=`moyu_${f}${n-1}`;s.getdata(a)&&s.setdata("",a),r=b}catch(e){t(e||"获取黄历失败")}}e(r.find((e=>+e.day===o)))}));var y;l&&(a+="\n【今日黄历】",a+="\n[农]"+l.lunar,a+="\n[势]"+l.lunarGanZhi,(null===(y=l.festivals)||void 0===y?void 0:y.length)&&(a+="\n[节]"+l.festivals.map((e=>`【${e}】`)).join("")),a+="\n[宜]"+l.suit.map((e=>null!=e&&e.desc?`${e.name(e.desc)}`:`${e.name}`)).join(" "),a+="\n[忌]"+l.avoid.map((e=>null!=e&&e.desc?`${e.name(e.desc)}`:`${e.name}`)).join(" "));const m=p(function(){const e=r,t=e.getDay(),b=6===t?0:6-t;return new Date(e.getFullYear(),e.getMonth(),e.getDate()+b+1,0,0,0).getTime()/1e3}());a+="\n【快乐周末】",a+=m>0&&m<6?`\n距离周末还有${m}天`:"\n今天就是周末呀，快去摸鱼吧~",a+="\n【节日预告】",h.length>0&&h.map((e=>{a+=`\n距离${e.festival}还有${e.diff}天`}));const v=["https://s2.loli.net/2022/02/24/SG5svAxd1eXwVDK.jpg","https://s2.loli.net/2022/02/24/St2w79Qq5eDABiH.jpg","https://s2.loli.net/2022/02/24/UQhuHPlIAnSY4fw.jpg","https://s2.loli.net/2022/02/24/5S2DBWdz4nciIp6.jpg","https://s2.loli.net/2022/02/24/SRLnuJQscvxzTlV.jpg","https://s2.loli.net/2022/02/24/FjANmSHr4lYkPXL.jpg","https://s2.loli.net/2022/02/24/qxhrKHpGmQzluao.jpg","https://s2.loli.net/2022/02/24/thvwPN1VCesn9FK.jpg","https://s2.loli.net/2022/02/24/eDM18l5tbwNkXCS.jpg","https://s2.loli.net/2022/02/24/iVUOzxqIBNTA5v4.jpg"],S=v[Math.floor(Math.random()*v.length)];s.msg(t,"",a,{mediaUrl:s.isLoon()?"":S}),e()}))})().catch((e=>s.logErr(e))).finally((()=>s.done()));const g=async()=>{const e=new Date,t=s.time("yyyy-MM-dd",e),b=JSON.parse((await c.get(`https://dict.youdao.com/infoline?mode=publish&date=${t}&update=auto&apiversion=5.0`)).body)[t].map((e=>({en:e.title,zh:e.summary})));return b[Math.floor(Math.random()*b.length)]};function p(e){return Math.floor((e-r.getTime().toString().slice(0,10))/60/60/24)}})()})();